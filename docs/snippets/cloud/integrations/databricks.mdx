import CreateServicePrincipal from '/snippets/dwh/databricks/create_service_principal.mdx';
import PermissionsAndSecurity from '/snippets/dwh/databricks/databricks_permissions_and_security.mdx';
import IpAllowlist from '/snippets/cloud/integrations/ip-allowlist.mdx';

This guide contains the necessary steps to connect a Databricks environment to your Elementary account.

<CreateServicePrincipal />

<PermissionsAndSecurity />

### Add an environment in Elementary (requires an admin user)

In the Elementary platform, go to Environments in the left menu, and click on the "Create Environment" button.
Choose a name for your environment, and then choose Databricks as your data warehouse type.

Provide the following fields in the form:

- **Server Host**: The hostname of your Databricks account to connect to.
- **Http path**: The path to the Databricks cluster or SQL warehouse.
- **Access token**: The token you generated for the Elementary service principal (see step 7 under "Create service principal" above)
- **Catalog (optional)**: The name of the Databricks Catalog.
- **Elementary schema**: The name of your Elementary schema. Usually `[your dbt target schema]_elementary`.

<IpAllowlist />
