### Create service account:

1. In the Cloud Console, go to: IAM & Admin > Service Accounts

2. Click on 'CREATE SERVICE ACCOUNT'

<img
src="https://res.cloudinary.com/mintlify/image/upload/v1659304875/elementary/create-service-account_birda0.png"
alt="Create service account"
/>

3. Fill in the service account name ('elementary') and account description ('Elementary Data') and click 'CREATE AND
   CONTINUE':

<img
src="https://res.cloudinary.com/mintlify/image/upload/v1659304876/elementary/create-continue_ai6ta9.png"
alt="Create and Continue"
/>

4. Now we need to configure the relevant permissions for this new service account. There are a cuple of options
- Option 1 - Choose BigQuery Admin or Owner - Not recommended, but it will work.
- Option 2 - Choose the following roles: BigQuery Job User, BigQuery User, BigQuery Data Viewer - Recommended for CLI users.
- Option 3 - Choose the following roles: BigQuery Job User, then add access on a dataset level later - Recommended for Elementary Cloud users.

5. The last step is optional so skip it if you don't need to manage this service account with another service account,
   and press done.

6. Press on the dots icon to the right of your screen for your new service account and select 'Manage keys':

<img
src="https://res.cloudinary.com/mintlify/image/upload/v1659304878/elementary/dots-icon_aafqkv.png"
alt="Manage keys"
/>

7. Press on 'ADD KEY' and select 'Create new key':

<img
src="https://res.cloudinary.com/mintlify/image/upload/v1659304875/elementary/add-key_v4hztr.png"
alt="Add Key"
/>

8. Use the 'JSON' option radio button and press 'CREATE':

<img
src="https://res.cloudinary.com/mintlify/image/upload/v1659304877/elementary/json_mybzda.png"
alt="JSON"
/>

9. This will automatically generate and download a JSON file with your private key information for this service account.
   This JSON file provides the credentials to programmatically connect and work with your BigQuery environment.

10. If you chose option 3 in step 4, make sure to grant the dataset access to the service account:
<Accordion title="Grant Access">
  <Snippet file="dwh/bigquery/grant_user_access_on_dataset_level.mdx" />
</Accordion>