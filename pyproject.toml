[tool.poetry]
name = "elementary-data"
version = "0.14.1"
description = "Data monitoring and lineage"
authors = ["Elementary"]
keywords = ["data", "lineage", "data lineage", "data warehouse", "DWH", "observability", "data monitoring", "data observability", "Snowflake", "BigQuery", "Redshift", "data reliability", "analytics engineering"]
license = "Apache-2.0"
readme = "README.md"
homepage = "https://www.elementary-data.com"
repository = "https://github.com/elementary-data/elementary"
documentation = "https://docs.elementary-data.com"

packages = [{include = "elementary"}]

[tool.poetry.dependencies]
python = ">=3.9,<4"
click = ">=7.0,<8.1.4"
pyfiglet = "<1.0.0"
dbt-core = ">=0.20,<2.0.0"
requests = ">=2.28.1,<3.0.0"
beautifulsoup4 = "<5.0.0"
ratelimit = "*"
posthog = "<3.0.0"
boto3 = "<2.0.0"
google-cloud-storage = "<3.0.0"
"ruamel.yaml" = "<1.0.0"
alive-progress = "<=2.3.1"
slack-sdk = ">=3.20.1,<4.0.0"
pytest-parametrization = ">=2022.2.1"

pydantic = "<3.0"
networkx = ">=2.3,<3"
packaging = ">=20.9,<=23.1"
azure-storage-blob = ">=12.11.0"
pymsteams = ">=0.2.2,<1.0.0"
retry = ">=0.9.2,<1.0.0"
pandas = ">=2.0.0"
tabulate = ">= 0.9.0"

dbt-snowflake = {version = ">=0.20,<2.0.0", optional = true}
dbt-bigquery = {version = ">=0.20,<2.0.0", optional = true}
dbt-redshift = {version = ">=0.20,<2.0.0", optional = true}
dbt-postgres = {version = ">=0.20,<2.0.0", optional = true}
dbt-databricks = {version = ">=0.20,<2.0.0", optional = true}
dbt-spark = {version = ">=0.20,<2.0.0", optional = true}
dbt-athena-community = {version = ">=1.6.3,<2.0.0", optional = true}

[tool.poetry.extras]
snowflake = ["dbt-snowflake"]
bigquery = ["dbt-bigquery"]
redshift = ["dbt-redshift"]
postgres = ["dbt-postgres"]
databricks = ["dbt-databricks"]
spark = ["dbt-spark"]
athena = ["dbt-athena-community"]
all = ["dbt-snowflake", "dbt-bigquery", "dbt-redshift", "dbt-postgres", "dbt-databricks", "dbt-spark"]

[tool.poetry.group.dev.dependencies]
pytest = "^8.0.2"
pre-commit = "^3.6.2"
mypy = "^1.8.0"
types-pkg-resources = "^0.1.3"
networkx-stubs = "^0.0.1"
types-python-dateutil = "^2.8.19.20240106"
boto3-stubs = "^1.34.56"
google-auth-stubs = "^0.2.0"
ratelimit-stubs = "^2.2.1"
types-google-cloud-ndb = "^2.2.0.20240205"
types-protobuf = "^4.24.0.20240302"
types-pytz = "^2024.1.0.20240203"
types-jsonschema = "^4.21.0.20240118"
types-pyyaml = "^6.0.12.12"
types-setuptools = "^69.1.0.20240302"
pandas-stubs = "^2.2.0.240218"
types-retry = "^0.9.9.4"

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.poetry.scripts]
edr = "elementary.cli.cli:cli"

[tool.black]
line-length = 120
target-version = ['py39', 'py310', 'py311', 'py312']
include = '\.pyi?$'

[tool.flake8]
files = '.*\.py'
max-line-length = 120
exclude = ['.git', '.eggs', '__pycache__', 'venv', '.venv']
ignore = [
    "W503",
    "E203",
    "E501"
]

[tool.mypy]
packages = ["elementary"]
exclude = ['^elementary/monitor/dbt_project/']
